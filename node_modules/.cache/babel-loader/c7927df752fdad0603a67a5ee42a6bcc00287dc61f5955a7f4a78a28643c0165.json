{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 1\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = {\n  key: 3\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SpecialGroupForm = _resolveComponent(\"SpecialGroupForm\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"特殊群体信息\", -1 /* HOISTED */)), !$data.showForm ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.showAddForm && $options.showAddForm(...args))\n  }, \"添加特殊群体信息\")) : _createCommentVNode(\"v-if\", true), $data.specialGroups.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"特殊群体类型\"), _createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.specialGroups, group => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: group.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(group.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(group.groupType), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showEditForm(group)\n    }, \"编辑\", 8 /* PROPS */, _hoisted_2), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteSpecialGroup(group.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_3)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : !$data.showForm ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"暂无特殊群体信息\")) : _createCommentVNode(\"v-if\", true), $data.showForm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_SpecialGroupForm, {\n    studentId: $props.studentId,\n    specialGroup: $data.currentSpecialGroup,\n    onSave: $options.handleSave,\n    onCancel: $options.resetForm\n  }, null, 8 /* PROPS */, [\"studentId\", \"specialGroup\", \"onSave\", \"onCancel\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","_createElementBlock","_createElementVNode","$data","showForm","onClick","_cache","args","$options","showAddForm","_createCommentVNode","specialGroups","length","_hoisted_1","_Fragment","_renderList","group","id","_toDisplayString","groupType","$event","showEditForm","_hoisted_2","deleteSpecialGroup","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_SpecialGroupForm","studentId","$props","specialGroup","currentSpecialGroup","onSave","handleSave","onCancel","resetForm"],"sources":["C:\\Users\\Administrator\\poverty-identification-system-frontend\\src\\components\\specialGroup\\SpecialGroupList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h4>特殊群体信息</h4>\r\n    <button v-if=\"!showForm\" @click=\"showAddForm\">添加特殊群体信息</button>\r\n\r\n    <table v-if=\"specialGroups.length > 0\">\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>特殊群体类型</th>\r\n          <th>操作</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"group in specialGroups\" :key=\"group.id\">\r\n          <td>{{ group.id }}</td>\r\n          <td>{{ group.groupType }}</td>\r\n          <td>\r\n            <button @click=\"showEditForm(group)\">编辑</button>\r\n            <button @click=\"deleteSpecialGroup(group.id)\">删除</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <p v-else-if=\"!showForm\">暂无特殊群体信息</p>\r\n    <div v-if=\"showForm\">\r\n      <SpecialGroupForm :studentId=\"studentId\" :specialGroup=\"currentSpecialGroup\" @save=\"handleSave\"\r\n        @cancel=\"resetForm\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SpecialGroupForm from './SpecialGroupForm.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'SpecialGroupList',\r\n  components: {\r\n    SpecialGroupForm,\r\n  },\r\n  props: {\r\n    studentId: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      specialGroups: [],\r\n      showForm: false,\r\n      currentSpecialGroup: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchSpecialGroups();\r\n  },\r\n  methods: {\r\n    async fetchSpecialGroups() {\r\n      try {\r\n        const response = await axios.get(`http://localhost:8080/special-group/${this.studentId}`); // 修改为绝对路径\r\n        this.specialGroups = response.data;\r\n      } catch (error) {\r\n        console.error('获取特殊群体信息失败:', error);\r\n      }\r\n    },\r\n    showAddForm() {\r\n      this.currentSpecialGroup = null;\r\n      this.showForm = true;\r\n    },\r\n    showEditForm(group) {\r\n      this.currentSpecialGroup = { ...group };\r\n      this.showForm = true;\r\n    },\r\n    async handleSave({ studentId, specialGroup }) {\r\n      if (this.currentSpecialGroup && this.currentSpecialGroup.id) {\r\n        // 编辑\r\n        try {\r\n          const response = await axios.put(`http://localhost:8080/special-group/${specialGroup.id}`, specialGroup); // 修改为绝对路径\r\n          if (response.status === 200) {\r\n            this.fetchSpecialGroups()\r\n            this.resetForm();\r\n          } else {\r\n            alert(response.data.message);\r\n          }\r\n        } catch (error) {\r\n          console.error('更新特殊群体信息失败:', error);\r\n          alert('更新失败');\r\n        }\r\n      } else {\r\n        // 添加\r\n        try {\r\n          const response = await axios.post(`http://localhost:8080/special-group/${studentId}`, specialGroup); // 修改为绝对路径\r\n          if (response.status === 200) {\r\n            this.fetchSpecialGroups()\r\n            this.resetForm();\r\n          } else {\r\n            alert(response.data.message);\r\n          }\r\n        } catch (error) {\r\n          console.error('添加特殊群体信息失败:', error);\r\n          alert('添加失败');\r\n        }\r\n      }\r\n\r\n    },\r\n    async deleteSpecialGroup(id) {\r\n      if (confirm('确定要删除该特殊群体信息吗？')) {\r\n        try {\r\n          await axios.delete(`http://localhost:8080/special-group/${id}`); // 修改为绝对路径\r\n          this.fetchSpecialGroups();\r\n        } catch (error) {\r\n          console.error('删除特殊群体信息失败:', error);\r\n        }\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.showForm = false;\r\n      this.currentSpecialGroup = null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 可以根据需要添加样式 */\r\n</style>"],"mappings":";;EAAAA,GAAA;AAAA;mBAAA;mBAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;uBACEC,mBAAA,CA4BM,c,0BA3BJC,mBAAA,CAAe,YAAX,QAAM,sB,CACKC,KAAA,CAAAC,QAAQ,I,cAAvBH,mBAAA,CAA+D;IAHnED,GAAA;IAG8BK,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,UAAQ,KAH1DG,mBAAA,gBAKiBP,KAAA,CAAAQ,aAAa,CAACC,MAAM,Q,cAAjCX,mBAAA,CAkBQ,SAvBZY,UAAA,G,0BAMMX,mBAAA,CAMQ,gBALNA,mBAAA,CAIK,aAHHA,mBAAA,CAAW,YAAP,IAAE,GACNA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAW,YAAP,IAAE,E,wBAGVA,mBAAA,CASQ,iB,kBARND,mBAAA,CAOKa,SAAA,QArBbC,WAAA,CAc4BZ,KAAA,CAAAQ,aAAa,EAAtBK,KAAK;yBAAhBf,mBAAA,CAOK;MAP+BD,GAAG,EAAEgB,KAAK,CAACC;QAC7Cf,mBAAA,CAAuB,YAAAgB,gBAAA,CAAhBF,KAAK,CAACC,EAAE,kBACff,mBAAA,CAA8B,YAAAgB,gBAAA,CAAvBF,KAAK,CAACG,SAAS,kBACtBjB,mBAAA,CAGK,aAFHA,mBAAA,CAAgD;MAAvCG,OAAK,EAAAe,MAAA,IAAEZ,QAAA,CAAAa,YAAY,CAACL,KAAK;OAAG,IAAE,iBAlBnDM,UAAA,GAmBYpB,mBAAA,CAAyD;MAAhDG,OAAK,EAAAe,MAAA,IAAEZ,QAAA,CAAAe,kBAAkB,CAACP,KAAK,CAACC,EAAE;OAAG,IAAE,iBAnB5DO,UAAA,E;yCAwBmBrB,KAAA,CAAAC,QAAQ,I,cAAvBH,mBAAA,CAAqC,KAxBzCwB,UAAA,EAwB6B,UAAQ,KAxBrCf,mBAAA,gBAyBeP,KAAA,CAAAC,QAAQ,I,cAAnBH,mBAAA,CAGM,OA5BVyB,UAAA,GA0BMC,YAAA,CACwBC,2BAAA;IADLC,SAAS,EAAEC,MAAA,CAAAD,SAAS;IAAGE,YAAY,EAAE5B,KAAA,CAAA6B,mBAAmB;IAAGC,MAAI,EAAEzB,QAAA,CAAA0B,UAAU;IAC3FC,QAAM,EAAE3B,QAAA,CAAA4B;oFA3BjB1B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}