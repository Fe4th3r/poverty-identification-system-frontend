{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 1\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = {\n  key: 3\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_WorkStudyForm = _resolveComponent(\"WorkStudyForm\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"勤工助学信息\", -1 /* HOISTED */)), !$data.showForm ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.showAddForm && $options.showAddForm(...args))\n  }, \"添加勤工助学信息\")) : _createCommentVNode(\"v-if\", true), $data.workStudies.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"岗位名称\"), _createElementVNode(\"th\", null, \"开始日期\"), _createElementVNode(\"th\", null, \"结束日期\"), _createElementVNode(\"th\", null, \"月收入\"), _createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.workStudies, workStudy => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: workStudy.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(workStudy.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(workStudy.position), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($options.formatDate(workStudy.startDate)), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($options.formatDate(workStudy.endDate)), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(workStudy.monthlySalary), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showEditForm(workStudy)\n    }, \"编辑\", 8 /* PROPS */, _hoisted_2), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteWorkStudy(workStudy.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_3)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : !$data.showForm ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"暂无勤工助学信息\")) : _createCommentVNode(\"v-if\", true), $data.showForm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_WorkStudyForm, {\n    studentId: $props.studentId,\n    workStudy: $data.currentWorkStudy,\n    onSave: $options.handleSave,\n    onCancel: $options.resetForm\n  }, null, 8 /* PROPS */, [\"studentId\", \"workStudy\", \"onSave\", \"onCancel\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","_createElementBlock","_createElementVNode","$data","showForm","onClick","_cache","args","$options","showAddForm","_createCommentVNode","workStudies","length","_hoisted_1","_Fragment","_renderList","workStudy","id","_toDisplayString","position","formatDate","startDate","endDate","monthlySalary","$event","showEditForm","_hoisted_2","deleteWorkStudy","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_WorkStudyForm","studentId","$props","currentWorkStudy","onSave","handleSave","onCancel","resetForm"],"sources":["C:\\Users\\Administrator\\poverty-identification-system-frontend\\src\\components\\workStudy\\WorkStudyList.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h4>勤工助学信息</h4>\r\n      <button v-if=\"!showForm\" @click=\"showAddForm\">添加勤工助学信息</button>\r\n  \r\n      <table v-if=\"workStudies.length > 0\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>岗位名称</th>\r\n            <th>开始日期</th>\r\n            <th>结束日期</th>\r\n            <th>月收入</th>\r\n            <th>操作</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"workStudy in workStudies\" :key=\"workStudy.id\">\r\n            <td>{{ workStudy.id }}</td>\r\n            <td>{{ workStudy.position }}</td>\r\n            <td>{{ formatDate(workStudy.startDate) }}</td>\r\n            <td>{{ formatDate(workStudy.endDate) }}</td>\r\n            <td>{{ workStudy.monthlySalary }}</td>\r\n            <td>\r\n              <button @click=\"showEditForm(workStudy)\">编辑</button>\r\n              <button @click=\"deleteWorkStudy(workStudy.id)\">删除</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <p v-else-if=\"!showForm\">暂无勤工助学信息</p>\r\n  \r\n      <div v-if=\"showForm\">\r\n        <WorkStudyForm :studentId=\"studentId\" :workStudy=\"currentWorkStudy\" @save=\"handleSave\" @cancel=\"resetForm\" />\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import WorkStudyForm from './WorkStudyForm.vue';\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'WorkStudyList',\r\n    components: {\r\n      WorkStudyForm,\r\n    },\r\n    props: {\r\n      studentId: {\r\n        type: Number,\r\n        required: true,\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        workStudies: [],\r\n        showForm: false,\r\n        currentWorkStudy: null,\r\n      };\r\n    },\r\n    mounted() {\r\n      this.fetchWorkStudies();\r\n    },\r\n    methods: {\r\n      async fetchWorkStudies() {\r\n        try {\r\n          const response = await axios.get(`/api/work-study/${this.studentId}`);\r\n          this.workStudies = response.data;\r\n        } catch (error) {\r\n          console.error('获取勤工助学信息失败:', error);\r\n        }\r\n      },\r\n      showAddForm() {\r\n        this.currentWorkStudy = null;\r\n        this.showForm = true;\r\n      },\r\n      showEditForm(workStudy) {\r\n        this.currentWorkStudy = { ...workStudy };\r\n        this.showForm = true;\r\n      },\r\n      async handleSave({ studentId, workStudy }) {\r\n        if (this.currentWorkStudy && this.currentWorkStudy.id) {\r\n          // 编辑\r\n          try {\r\n            const response = await axios.put(`/api/work-study/${workStudy.id}`, workStudy);\r\n            if (response.status === 200) {\r\n              this.fetchWorkStudies();\r\n              this.resetForm();\r\n            } else {\r\n              alert(response.data.message);\r\n            }\r\n          } catch (error) {\r\n            console.error('更新勤工助学信息失败:', error);\r\n            alert('更新失败');\r\n          }\r\n        } else {\r\n          // 添加\r\n          try {\r\n            const response = await axios.post(`/api/work-study/${studentId}`, workStudy);\r\n            if (response.status === 200) {\r\n              this.fetchWorkStudies();\r\n              this.resetForm();\r\n            } else {\r\n              alert(response.data.message);\r\n            }\r\n          } catch (error) {\r\n            console.error('添加勤工助学信息失败:', error);\r\n            alert('添加失败');\r\n          }\r\n        }\r\n      },\r\n      async deleteWorkStudy(id) {\r\n        if (confirm('确定要删除该勤工助学信息吗？')) {\r\n          try {\r\n            await axios.delete(`/api/work-study/${id}`);\r\n            this.fetchWorkStudies();\r\n          } catch (error) {\r\n            console.error('删除勤工助学信息失败:', error);\r\n          }\r\n        }\r\n      },\r\n      resetForm() {\r\n        this.showForm = false;\r\n        this.currentWorkStudy = null;\r\n      },\r\n      formatDate(dateString) {\r\n        if (!dateString) return '';\r\n        const date = new Date(dateString);\r\n        return date.toISOString().split('T')[0];\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* 可以根据需要添加样式 */\r\n  </style>"],"mappings":";;EAAAA,GAAA;AAAA;mBAAA;mBAAA;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;uBACIC,mBAAA,CAkCM,c,0BAjCJC,mBAAA,CAAe,YAAX,QAAM,sB,CACKC,KAAA,CAAAC,QAAQ,I,cAAvBH,mBAAA,CAA+D;IAHrED,GAAA;IAGgCK,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,UAAQ,KAH5DG,mBAAA,gBAKmBP,KAAA,CAAAQ,WAAW,CAACC,MAAM,Q,cAA/BX,mBAAA,CAwBQ,SA7BdY,UAAA,G,0BAMQX,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAW,YAAP,IAAE,GACNA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAY,YAAR,KAAG,GACPA,mBAAA,CAAW,YAAP,IAAE,E,wBAGVA,mBAAA,CAYQ,iB,kBAXND,mBAAA,CAUKa,SAAA,QA3BfC,WAAA,CAiBkCZ,KAAA,CAAAQ,WAAW,EAAxBK,SAAS;yBAApBf,mBAAA,CAUK;MAViCD,GAAG,EAAEgB,SAAS,CAACC;QACnDf,mBAAA,CAA2B,YAAAgB,gBAAA,CAApBF,SAAS,CAACC,EAAE,kBACnBf,mBAAA,CAAiC,YAAAgB,gBAAA,CAA1BF,SAAS,CAACG,QAAQ,kBACzBjB,mBAAA,CAA8C,YAAAgB,gBAAA,CAAvCV,QAAA,CAAAY,UAAU,CAACJ,SAAS,CAACK,SAAS,mBACrCnB,mBAAA,CAA4C,YAAAgB,gBAAA,CAArCV,QAAA,CAAAY,UAAU,CAACJ,SAAS,CAACM,OAAO,mBACnCpB,mBAAA,CAAsC,YAAAgB,gBAAA,CAA/BF,SAAS,CAACO,aAAa,kBAC9BrB,mBAAA,CAGK,aAFHA,mBAAA,CAAoD;MAA3CG,OAAK,EAAAmB,MAAA,IAAEhB,QAAA,CAAAiB,YAAY,CAACT,SAAS;OAAG,IAAE,iBAxBzDU,UAAA,GAyBcxB,mBAAA,CAA0D;MAAjDG,OAAK,EAAAmB,MAAA,IAAEhB,QAAA,CAAAmB,eAAe,CAACX,SAAS,CAACC,EAAE;OAAG,IAAE,iBAzB/DW,UAAA,E;yCA8BqBzB,KAAA,CAAAC,QAAQ,I,cAAvBH,mBAAA,CAAqC,KA9B3C4B,UAAA,EA8B+B,UAAQ,KA9BvCnB,mBAAA,gBAgCiBP,KAAA,CAAAC,QAAQ,I,cAAnBH,mBAAA,CAEM,OAlCZ6B,UAAA,GAiCQC,YAAA,CAA6GC,wBAAA;IAA7FC,SAAS,EAAEC,MAAA,CAAAD,SAAS;IAAGjB,SAAS,EAAEb,KAAA,CAAAgC,gBAAgB;IAAGC,MAAI,EAAE5B,QAAA,CAAA6B,UAAU;IAAGC,QAAM,EAAE9B,QAAA,CAAA+B;iFAjCxG7B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}