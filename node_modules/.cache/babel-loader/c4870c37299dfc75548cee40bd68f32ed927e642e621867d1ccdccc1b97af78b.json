{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, vModelText as _vModelText, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  id: \"printArea\"\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 2\n};\nconst _hoisted_12 = {\n  key: 3\n};\nconst _hoisted_13 = {\n  key: 4\n};\nconst _hoisted_14 = {\n  key: 5\n};\nconst _hoisted_15 = {\n  key: 6\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_StudentForm = _resolveComponent(\"StudentForm\");\n  const _component_FamilyInfoForm = _resolveComponent(\"FamilyInfoForm\");\n  const _component_SpecialGroupList = _resolveComponent(\"SpecialGroupList\");\n  const _component_EmergencyList = _resolveComponent(\"EmergencyList\");\n  const _component_WorkStudyList = _resolveComponent(\"WorkStudyList\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_withDirectives(_createElementVNode(\"nav\", null, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"首页\")])),\n    _: 1 /* STABLE */\n  }), _cache[12] || (_cache[12] = _createTextVNode(\" | \")), _createVNode(_component_router_link, {\n    to: \"/login\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"登录\")])),\n    _: 1 /* STABLE */\n  }), _cache[13] || (_cache[13] = _createTextVNode(\" | \")), _createVNode(_component_router_link, {\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"注册\")])),\n    _: 1 /* STABLE */\n  }), _cache[14] || (_cache[14] = _createTextVNode(\" | \")), _createVNode(_component_router_link, {\n    to: \"/student\"\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"学生信息管理\")])),\n    _: 1 /* STABLE */\n  }), _cache[15] || (_cache[15] = _createTextVNode(\" | \")), _createVNode(_component_router_link, {\n    to: \"/data-cleaning\"\n  }, {\n    default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"数据清洗\")])),\n    _: 1 /* STABLE */\n  }), _cache[16] || (_cache[16] = _createTextVNode(\" | \")), _createVNode(_component_router_link, {\n    to: \"/poverty-identification\"\n  }, {\n    default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"贫困生甄别\")])),\n    _: 1 /* STABLE */\n  })], 512 /* NEED_PATCH */), [[_vShow, !$data.isPrinting]]), _withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.fetchStudents && $options.fetchStudents(...args))\n  }, \"加载学生数据\"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.showAddForm && $options.showAddForm(...args))\n  }, \"添加学生\"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.printStudentList && $options.printStudentList(...args))\n  }, \"打印学生列表\"), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.exportStudentData && $options.exportStudentData(...args))\n  }, \"导出学生数据\"), _cache[17] || (_cache[17] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.searchName = $event),\n    placeholder: \"输入姓名搜索\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchName]]), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.searchStudents && $options.searchStudents(...args))\n  }, \"搜索\")], 512 /* NEED_PATCH */), [[_vShow, !$data.isPrinting]]), $data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[19] || (_cache[19] = _createElementVNode(\"h2\", {\n    class: \"print-title\"\n  }, \"学生信息列表\", -1 /* HOISTED */)), _createElementVNode(\"table\", null, [_cache[18] || (_cache[18] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"学号\"), _createElementVNode(\"th\", null, \"姓名\"), _createElementVNode(\"th\", null, \"性别\"), _createElementVNode(\"th\", null, \"身份证号\"), _createElementVNode(\"th\", null, \"专业\"), _createElementVNode(\"th\", null, \"贫困等级\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.students, student => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: student.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(student.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.stuId), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.gender), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.idCard), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.major), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.povertyLevel ? student.povertyLevel : '未评定'), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[21] || (_cache[21] = _createElementVNode(\"h2\", {\n    class: \"list-title\"\n  }, \"学生信息列表\", -1 /* HOISTED */)), _createElementVNode(\"table\", null, [_cache[20] || (_cache[20] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"学号\"), _createElementVNode(\"th\", null, \"姓名\"), _createElementVNode(\"th\", null, \"性别\"), _createElementVNode(\"th\", null, \"身份证号\"), _createElementVNode(\"th\", null, \"专业\"), _createElementVNode(\"th\", null, \"贫困等级\"), _createElementVNode(\"th\", null, \"操作\"), _createElementVNode(\"th\", null, \"家庭信息操作\"), _createElementVNode(\"th\", null, \"特殊群体操作\"), _createElementVNode(\"th\", null, \"突发状况操作\"), _createElementVNode(\"th\", null, \"勤工助学操作\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.students, student => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: student.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(student.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.stuId), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.gender), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.idCard), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.major), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(student.povertyLevel ? student.povertyLevel : '未评定'), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showEditForm(student)\n    }, \"编辑\", 8 /* PROPS */, _hoisted_3), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteStudent(student.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_4)]), _createElementVNode(\"td\", null, [!$options.hasFamilyInfo(student) ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.showAddFamilyInfoForm(student.id)\n    }, \"添加家庭信息\", 8 /* PROPS */, _hoisted_5)) : (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.showEditFamilyInfoForm(student)\n    }, \"编辑家庭信息\", 8 /* PROPS */, _hoisted_6)), $options.hasFamilyInfo(student) ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.deleteFamilyInfo(student.id)\n    }, \"删除家庭信息\", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showSpecialGroupList(student.id)\n    }, \"查看\", 8 /* PROPS */, _hoisted_8)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showEmergencyList(student.id)\n    }, \"查看\", 8 /* PROPS */, _hoisted_9)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.showWorkStudyList(student.id)\n    }, \"查看\", 8 /* PROPS */, _hoisted_10)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])), $data.showForm && !$data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createVNode(_component_StudentForm, {\n    student: $data.currentStudent,\n    onSave: $options.handleSave,\n    onCancel: $options.resetForm\n  }, null, 8 /* PROPS */, [\"student\", \"onSave\", \"onCancel\"])])) : _createCommentVNode(\"v-if\", true), $data.showFamilyForm && !$data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_FamilyInfoForm, {\n    studentId: $data.currentStudentId,\n    familyInfo: $data.currentFamilyInfo,\n    onSave: $options.handleFamilyInfoSave,\n    onCancel: $options.resetFamilyForm\n  }, null, 8 /* PROPS */, [\"studentId\", \"familyInfo\", \"onSave\", \"onCancel\"])])) : _createCommentVNode(\"v-if\", true), $data.showSpecialGroup && !$data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createVNode(_component_SpecialGroupList, {\n    studentId: $data.currentStudentId\n  }, null, 8 /* PROPS */, [\"studentId\"])])) : _createCommentVNode(\"v-if\", true), $data.showEmergency && !$data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createVNode(_component_EmergencyList, {\n    studentId: $data.currentStudentId\n  }, null, 8 /* PROPS */, [\"studentId\"])])) : _createCommentVNode(\"v-if\", true), $data.showWorkStudy && !$data.isPrinting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createVNode(_component_WorkStudyList, {\n    studentId: $data.currentStudentId\n  }, null, 8 /* PROPS */, [\"studentId\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","id","_createElementBlock","_createElementVNode","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","$data","isPrinting","onClick","args","$options","fetchStudents","showAddForm","printStudentList","exportStudentData","type","$event","searchName","placeholder","searchStudents","_hoisted_1","class","_Fragment","_renderList","students","student","_toDisplayString","stuId","name","gender","idCard","major","povertyLevel","_hoisted_2","showEditForm","_hoisted_3","deleteStudent","_hoisted_4","hasFamilyInfo","showAddFamilyInfoForm","_hoisted_5","showEditFamilyInfoForm","_hoisted_6","deleteFamilyInfo","_hoisted_7","_createCommentVNode","showSpecialGroupList","_hoisted_8","showEmergencyList","_hoisted_9","showWorkStudyList","_hoisted_10","showForm","_hoisted_11","_component_StudentForm","currentStudent","onSave","handleSave","onCancel","resetForm","showFamilyForm","_hoisted_12","_component_FamilyInfoForm","studentId","currentStudentId","familyInfo","currentFamilyInfo","handleFamilyInfoSave","resetFamilyForm","showSpecialGroup","_hoisted_13","_component_SpecialGroupList","showEmergency","_hoisted_14","_component_EmergencyList","showWorkStudy","_hoisted_15","_component_WorkStudyList"],"sources":["C:\\Users\\Administrator\\poverty-identification-system-frontend\\src\\components\\student\\StudentList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <nav v-show=\"!isPrinting\">\r\n      <router-link to=\"/\">首页</router-link> |\r\n      <router-link to=\"/login\">登录</router-link> |\r\n      <router-link to=\"/register\">注册</router-link> |\r\n      <router-link to=\"/student\">学生信息管理</router-link> |\r\n      <router-link to=\"/data-cleaning\">数据清洗</router-link> |\r\n      <router-link to=\"/poverty-identification\">贫困生甄别</router-link>\r\n    </nav>\r\n\r\n    <div v-show=\"!isPrinting\">\r\n      <button @click=\"fetchStudents\">加载学生数据</button>\r\n      <button @click=\"showAddForm\">添加学生</button>\r\n      <button @click=\"printStudentList\">打印学生列表</button>\r\n      <button @click=\"exportStudentData\">导出学生数据</button>\r\n      <br />\r\n      <input type=\"text\" v-model=\"searchName\" placeholder=\"输入姓名搜索\" />\r\n      <button @click=\"searchStudents\">搜索</button>\r\n    </div>\r\n\r\n    <div id=\"printArea\" v-if=\"isPrinting\">\r\n       <h2 class=\"print-title\">学生信息列表</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>学号</th>\r\n            <th>姓名</th>\r\n            <th>性别</th>\r\n            <th>身份证号</th>\r\n            <th>专业</th>\r\n            <th>贫困等级</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"student in students\" :key=\"student.id\">\r\n            <td>{{ student.id }}</td>\r\n            <td>{{ student.stuId }}</td>\r\n            <td>{{ student.name }}</td>\r\n            <td>{{ student.gender }}</td>\r\n            <td>{{ student.idCard }}</td>\r\n            <td>{{ student.major }}</td>\r\n            <td>{{ student.povertyLevel ? student.povertyLevel : '未评定' }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div v-else>\r\n       <h2 class=\"list-title\">学生信息列表</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>学号</th>\r\n            <th>姓名</th>\r\n            <th>性别</th>\r\n            <th>身份证号</th>\r\n            <th>专业</th>\r\n            <th>贫困等级</th>\r\n            <th>操作</th>\r\n            <th>家庭信息操作</th>\r\n            <th>特殊群体操作</th>\r\n            <th>突发状况操作</th>\r\n            <th>勤工助学操作</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"student in students\" :key=\"student.id\">\r\n            <td>{{ student.id }}</td>\r\n            <td>{{ student.stuId }}</td>\r\n            <td>{{ student.name }}</td>\r\n            <td>{{ student.gender }}</td>\r\n            <td>{{ student.idCard }}</td>\r\n            <td>{{ student.major }}</td>\r\n            <td>{{ student.povertyLevel ? student.povertyLevel : '未评定' }}</td>\r\n            <td>\r\n              <button @click=\"showEditForm(student)\">编辑</button>\r\n              <button @click=\"deleteStudent(student.id)\">删除</button>\r\n            </td>\r\n            <td>\r\n              <button v-if=\"!hasFamilyInfo(student)\" @click=\"showAddFamilyInfoForm(student.id)\">添加家庭信息</button>\r\n              <button v-else @click=\"showEditFamilyInfoForm(student)\">编辑家庭信息</button>\r\n              <button v-if=\"hasFamilyInfo(student)\" @click=\"deleteFamilyInfo(student.id)\">删除家庭信息</button>\r\n            </td>\r\n            <td>\r\n              <button @click=\"showSpecialGroupList(student.id)\">查看</button>\r\n            </td>\r\n            <td>\r\n              <button @click=\"showEmergencyList(student.id)\">查看</button>\r\n            </td>\r\n            <td>\r\n              <button @click=\"showWorkStudyList(student.id)\">查看</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div v-if=\"showForm && !isPrinting\">\r\n      <StudentForm :student=\"currentStudent\" @save=\"handleSave\" @cancel=\"resetForm\" />\r\n    </div>\r\n    <div v-if=\"showFamilyForm && !isPrinting\">\r\n      <FamilyInfoForm :studentId=\"currentStudentId\" :familyInfo=\"currentFamilyInfo\" @save=\"handleFamilyInfoSave\"\r\n        @cancel=\"resetFamilyForm\" />\r\n    </div>\r\n    <div v-if=\"showSpecialGroup && !isPrinting\">\r\n      <SpecialGroupList :studentId=\"currentStudentId\" />\r\n    </div>\r\n    <div v-if=\"showEmergency && !isPrinting\">\r\n      <EmergencyList :studentId=\"currentStudentId\" />\r\n    </div>\r\n    <div v-if=\"showWorkStudy && !isPrinting\">\r\n      <WorkStudyList :studentId=\"currentStudentId\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport StudentForm from './StudentForm.vue';\r\nimport FamilyInfoForm from '../family/FamilyInfoForm.vue';\r\nimport SpecialGroupList from '../specialGroup/SpecialGroupList.vue';\r\nimport EmergencyList from '../emergency/EmergencyList.vue';\r\nimport WorkStudyList from '../workStudy/WorkStudyList.vue';\r\n\r\nexport default {\r\n  name: 'StudentList',\r\n  components: {\r\n    StudentForm,\r\n    FamilyInfoForm,\r\n    SpecialGroupList,\r\n    EmergencyList,\r\n    WorkStudyList\r\n  },\r\n  data() {\r\n    return {\r\n      students: [],\r\n      searchName: '',\r\n      showForm: false,\r\n      showFamilyForm: false,\r\n      showSpecialGroup: false,\r\n      showEmergency: false,\r\n      showWorkStudy: false,\r\n      currentStudent: null,\r\n      currentStudentId: null,\r\n      currentFamilyInfo: null,\r\n      isPrinting: false,\r\n    };\r\n  },\r\n  mounted(){\r\n    this.$emit('update:isPrinting', false);\r\n},\r\n  methods: {\r\n    async fetchStudents() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/student'); // 修改为绝对路径\r\n        this.students = response.data;\r\n      } catch (error) {\r\n        console.error('获取学生信息失败:', error);\r\n      }\r\n    },\r\n    async searchStudents() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/student/search', { // 修改为绝对路径\r\n          params: {\r\n            name: this.searchName,\r\n          },\r\n        });\r\n        this.students = response.data;\r\n      } catch (error) {\r\n        console.error('搜索学生信息失败:', error);\r\n      }\r\n    },\r\n    showAddForm() {\r\n      this.currentStudent = null;\r\n      this.showForm = true;\r\n    },\r\n    showEditForm(student) {\r\n      this.currentStudent = { ...student }; // 复制一份，避免直接修改原数据\r\n      this.showForm = true;\r\n    },\r\n    async deleteStudent(id) {\r\n      if (confirm('确定要删除该学生信息吗？')) {\r\n        try {\r\n          await axios.delete(`http://localhost:8080/student/${id}`); // 修改为绝对路径\r\n          this.fetchStudents(); // 删除后重新加载列表\r\n        } catch (error) {\r\n          console.error('删除学生信息失败:', error);\r\n        }\r\n      }\r\n    },\r\n    handleSave(studentData) {\r\n      if (studentData.id) {\r\n        // 编辑\r\n        this.updateStudent(studentData);\r\n      } else {\r\n        // 添加\r\n        this.addStudent(studentData);\r\n      }\r\n    },\r\n    async addStudent(studentData) {\r\n      try {\r\n        const response = await axios.post('http://localhost:8080/student', studentData); // 修改为绝对路径\r\n        if (response.status === 200) {\r\n          this.fetchStudents(); // 添加后重新加载列表\r\n          this.resetForm();\r\n        } else {\r\n          alert(response.data.message); // 显示错误信息\r\n        }\r\n      } catch (error) {\r\n        console.error('添加学生信息失败:', error);\r\n        alert('添加失败');\r\n      }\r\n    },\r\n    async updateStudent(studentData) {\r\n      try {\r\n        const response = await axios.put(`http://localhost:8080/student/${studentData.id}`, studentData); // 修改为绝对路径\r\n        if (response.status === 200) {\r\n          this.fetchStudents(); // 更新后重新加载列表\r\n          this.resetForm();\r\n        } else {\r\n          alert(response.data.message);\r\n        }\r\n      } catch (error) {\r\n        console.error('更新学生信息失败:', error);\r\n        alert('更新失败');\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.showForm = false;\r\n      this.currentStudent = null;\r\n    },\r\n    hasFamilyInfo(student) {\r\n      return student.familyInfo !== null;\r\n    },\r\n    showAddFamilyInfoForm(studentId) {\r\n      this.currentStudentId = studentId;\r\n      this.currentFamilyInfo = null;\r\n      this.showFamilyForm = true;\r\n    },\r\n    async showEditFamilyInfoForm(student) {\r\n      this.currentStudentId = student.id;\r\n      // 获取家庭信息\r\n      try {\r\n        const response = await axios.get(`http://localhost:8080/family-info/${student.id}`); // 修改为绝对路径\r\n        this.currentFamilyInfo = response.data;\r\n      } catch (error) {\r\n        console.error(\"获取家庭信息失败:\", error);\r\n        this.currentFamilyInfo = null; // 获取失败也要重置\r\n      }\r\n      this.showFamilyForm = true;\r\n    },\r\n    async deleteFamilyInfo(id) {\r\n    if (confirm('确定要删除该学生的家庭信息吗？')) {\r\n      try {\r\n        await axios.delete(`http://localhost:8080/family-info/${id}`); // 修改为绝对路径\r\n        this.fetchStudents(); // 重新加载学生列表\r\n      } catch (error) {\r\n        console.error('删除家庭信息失败:', error);\r\n      }\r\n    }\r\n  },\r\n    async handleFamilyInfoSave({ studentId, familyInfo }) {\r\n      if (this.currentFamilyInfo && this.currentFamilyInfo.id) {\r\n        // 编辑\r\n        try {\r\n          const response = await axios.put(`http://localhost:8080/family-info/${studentId}`, familyInfo); // 修改为绝对路径\r\n          if (response.status === 200) {\r\n            this.fetchStudents(); // 重新加载学生列表\r\n            this.resetFamilyForm();\r\n          } else {\r\n            alert(response.data.message);\r\n          }\r\n        } catch (error) {\r\n          console.error('更新家庭信息失败:', error);\r\n          alert('更新失败');\r\n        }\r\n      } else {\r\n        // 添加\r\n        try {\r\n          const response = await axios.post(`http://localhost:8080/family-info/${studentId}`, familyInfo); // 修改为绝对路径\r\n          if (response.status === 200) {\r\n            this.fetchStudents(); // 重新加载学生列表\r\n            this.resetFamilyForm();\r\n          } else {\r\n            alert(response.data.message);\r\n          }\r\n        } catch (error) {\r\n          console.error('添加家庭信息失败:', error);\r\n          alert('添加失败');\r\n        }\r\n      }\r\n    },\r\n    resetFamilyForm() {\r\n      this.showFamilyForm = false;\r\n      this.currentStudentId = null;\r\n      this.currentFamilyInfo = null;\r\n    },\r\n    showSpecialGroupList(studentId) {\r\n      this.currentStudentId = studentId;\r\n      this.showSpecialGroup = true;\r\n    },\r\n    async deleteSpecialGroup(id) {\r\n      if (confirm('确定要删除该学生的特殊群体信息吗？')) {\r\n        try {\r\n          await axios.delete(`http://localhost:8080/special-group/${id}`); // 修改为绝对路径\r\n          this.fetchStudents(); // 重新加载学生列表\r\n        } catch (error) {\r\n          console.error('删除特殊群体信息失败:', error);\r\n        }\r\n      }\r\n    },\r\n    resetSpecialGroupList() {\r\n      this.showSpecialGroup = false;\r\n      this.currentStudentId = null;\r\n    },\r\n    showEmergencyList(studentId) {\r\n      this.currentStudentId = studentId;\r\n      this.showEmergency = true;\r\n    },\r\n    resetEmergencyList() {\r\n      this.showEmergency = false;\r\n      this.currentStudentId = null;\r\n    },\r\n    showWorkStudyList(studentId) {\r\n    this.currentStudentId = studentId;\r\n    this.showWorkStudy = true;\r\n    },\r\n    resetWorkStudyList() {\r\n      this.showWorkStudy = false;\r\n      this.currentStudentId = null;\r\n    },\r\n    printStudentList() {\r\n        this.isPrinting = true;\r\n        this.$emit('update:isPrinting', true);\r\n        this.$nextTick(() => {\r\n            try {\r\n                window.print();\r\n            } finally {\r\n                this.isPrinting = false;\r\n                this.$emit('update:isPrinting', false);\r\n            }\r\n        });\r\n},\r\n    async exportStudentData() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/student/export', { // 修改为绝对路径\r\n          responseType: 'blob', // 重要：指定响应类型为 blob\r\n        });\r\n\r\n        // 从响应头中获取文件名 (后端需要设置 Content-Disposition 头)\r\n        const disposition = response.headers['content-disposition'];\r\n        let filename = 'student_data.xlsx'; // 默认文件名\r\n        if (disposition) {\r\n          const filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\r\n          const matches = filenameRegex.exec(disposition);\r\n          if (matches != null && matches[1]) {\r\n            filename = matches[1].replace(/['\"]/g, '');\r\n          }\r\n        }\r\n\r\n        // 创建一个 Blob URL 并触发下载\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.setAttribute('download', filename);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        window.URL.revokeObjectURL(url);\r\n      } catch (error) {\r\n        console.error('导出学生数据失败:', error);\r\n        alert('导出学生数据失败');\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\nborder-collapse: collapse;\r\nwidth: 100%;\r\n}\r\n\r\nth,\r\ntd {\r\nborder: 1px solid black;\r\npadding: 8px;\r\ntext-align: left;\r\n}\r\n.list-title{\r\n  text-align: center; /* 正常情况下标题居中 */\r\n}\r\n.print-title {\r\n    text-align: left !important;\r\n  }\r\n@media print {\r\n  /* 打印样式 */\r\n  body * {\r\n    visibility: hidden;\r\n  }\r\n  .print-title {\r\n       text-align: left !important;\r\n  }\r\n  #printArea,\r\n  #printArea * {\r\n    visibility: visible;\r\n  }\r\n\r\n  #printArea {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n  button,\r\n  input,\r\n  .router-link-active,\r\n  nav,\r\n  .el-button,\r\n  .list-title{\r\n      display: none !important;\r\n  }\r\n    /* 清除浮动 */\r\n  #printArea::after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n\r\n  /* 设置表格的样式 */\r\n  table {\r\n    border-collapse: collapse;\r\n    width: 100%;\r\n    table-layout: auto;\r\n    page-break-inside: auto;\r\n  }\r\n\r\n  th,\r\n  td {\r\n    border: 1px solid black;\r\n    padding: 6px; /* 适当减小 padding */\r\n    text-align: left;\r\n    word-break: normal;\r\n    page-break-inside: avoid;\r\n    font-size: 10px; /* 适当减小字体大小 */\r\n  }\r\n\r\n  th {\r\n    background-color: #f2f2f2;\r\n  }\r\n\r\n  tr, td, th {\r\n    page-break-inside: avoid;\r\n  }\r\n\r\n  thead {\r\n    display: table-header-group;\r\n  }\r\n\r\n  tfoot {\r\n    display: table-footer-group;\r\n  }\r\n\r\n  /* 设置页边距 */\r\n  @page {\r\n    size: auto;\r\n    margin: 20mm;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}